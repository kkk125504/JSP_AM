### 게시물 수정 기능 구현

**1\) list.jsp**

```jsp
	<% for (Map<String, Object> articleRow : articleRows) { %>		
		<tr>
			<td><%=articleRow.get("id")%></td>
			<td><%=articleRow.get("regDate")%></td>
			<td><a href="detail?id=<%=articleRow.get("id")%>"><%=articleRow.get("title")%></a></td>
			<td><a href="modify?id=<%=articleRow.get("id")%>">수정</a></td>
			<td><a href="doDelete?id=<%=articleRow.get("id")%>">삭제</a></td>
		</tr>
     <% } %>
```

- 게시물 리스트 테이블에 수정버튼을 추가함
- modify서블릿으로 각각 게시물의 번호를 보냄

**2\) ArticleModifyServlet**			

```java
    try {
        conn = DriverManager.getConnection(url, user, password);
        int id = Integer.parseInt(request.getParameter("id"));
        SecSql sql =SecSql.from("SELECT * FROM article");
        sql.append("WHERE id =?",id);
        Map<String, Object> articleRow=DBUtil.selectRow(conn, sql);
        request.setAttribute("articleRow", articleRow);
        request.getRequestDispatcher("/jsp/article/modify.jsp").forward(request, response);					
	}
```

- moidfy서블릿에서 DB와 연결하여 id에 해당하는 게시물을 Map타입으로 가져옴
- 수정하는 페이지를 보여주기위해 /jsp/article/modify.jsp 이동
- 이때 수정페이지에서 해당게시물의 처음에 작성된 제목과 내용을 보여주기위해 가져옴

**3\) modify.jsp **	

```jsp
	<h1><%=(int)articleRow.get("id") %>번 게시물 수정</h1>

	<form action="doModify" method="post">
		<input type="hidden" name="id" value="${param.id}"/>
        <div>번호 : <%=(int)articleRow.get("id") %></div>
        <div>날짜 : <%=(LocalDateTime)articleRow.get("regDate") %></div>
        <div>제목 : <input type="text" name="title" value="<%=articleRow.get("title") %>"/></div>
        <div>내용 : <textarea type="text" name="body"><%=articleRow.get("body") %></textarea></div>
		<div>
			<a href="list" >리스트로 돌아가기</a>
			<button type="submit">수정</button>
		</div>	
```

- 수정할 제목과 내용을 form태그의 input태그로 받고 input태그안에 value속성으로 Map타입으로 가져온 게시물 의 제목과 내용을 보여줌
- ${param.id}는 request.getParameter("id")와 동일
- \<input type="hidden"> hidden타입은 보여지지 않는다. 하지만 ArticleDoModifyServlet에서 id를 알아야 쿼리문을 작성할수있으므로  보여지진 않지만 아이디를 제출

**4\) ArticleDoModifyServlet**

```java
    try {
        conn = DriverManager.getConnection(url, user, password);
        int id = Integer.parseInt(request.getParameter("id"));
        String title = request.getParameter("title");
        String body = request.getParameter("body");

        SecSql sql = SecSql.from("UPDATE article");
        sql.append("SET title = ?", title);			
        sql.append(", `body` = ?", body);
        sql.append("WHERE id=?", id);

        DBUtil.update(conn, sql);
        response.getWriter().append(String	
				.format("<script>alert('%d번 글이 수정 되었습니다.');location.replace('detail?id=%d');</script>", id,id));
	}
```

- 가져온 id,제목,내용으로 DB에 업데이트 