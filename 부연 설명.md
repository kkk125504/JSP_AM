### 게시물 리스트 페이징, 사이즈 제한 x

**1\) 보여줄 페이지와 페이지당 게시물 개수 제한**

```java
		int page = 1;
		if(request.getParameter("page") != null) {
			page = Integer.parseInt(request.getParameter("page"));
		}
		int itemsInAPage = 10;
		int limitFrom = (page-1) * itemsInAPage ;
		int limitTake = itemsInAPage;
```

- 게시물들이 전체가 리스팅 되고있어 제한을 걸어두기 위해 쿼리문 수정이 필요
- page당 10개의 게시물만 리스팅되게 하는게 목적
- parmeter로 page를 받음
- 만약 parmeter로 page가 없다면 1page를 보여줌
- limitFrom로 부터 limitTake까지 리스팅



**2\) DB에 보낼 쿼리문 수정**	

```java
	try {
		conn = DriverManager.getConnection(url, user, password);
		SecSql sql = SecSql.from("SELECT *");
		sql.append("FROM article");
        sql.append("ORDER BY id DESC");		
		sql.append("LIMIT ?,?", limitFrom,limitTake);		
        
        List<Map<String, Object>> articleRows = DBUtil.selectRows(conn, sql);
        sql = new SecSql();
        sql.append("SELECT COUNT(*) FROM article");
        int totalCount = DBUtil.selectRowIntValue(conn, sql);
        int totalPage = (int)Math.ceil(((double)totalCount/itemsInAPage));

        request.setAttribute("articleRows",articleRows);
        request.setAttribute("totalPage",totalPage);
        request.setAttribute("page",page);
        request.getRequestDispatcher("/jsp/article/list.jsp").forward(request, response);}
```

-  sql.append("SELECT COUNT(*) FROM article"); 페이징을 하기위해선 전체 게시물의 개수가 필요
- 게시물의 개수가 123개라면 한페이지당 10개씩 리스팅을 하기때문에 13페이지가 필요
- int totalPage = (int)Math.ceil(((double)totalCount/itemsInAPage)); 
- DB를 통해 가져온 게시물의 개수를 한페이지당 리스팅할 수로 나누고 반올림하여 페이징개수를 정함
- 이때 Math.ceil() 메소드를 사용하려면 인자값이 double이여야하기때문에 형변환해주고 
-  Math.ceil()의 리턴값은 반올림하였지만 double이기 때문에 다시 int로 형변환

- 만약 list?page=6이라면 6페이지에 해당하는 게시물들을 보여주고있다. 
- request.setAttribute("page",page);는 list.jsp에서 6페이지에 해당하는 게시물들이 리스팅됬다면 
- 페이징 버튼중 6에 해당하는 버튼의 스타일을 적용하기위해 공유 자원으로 만듬



**3\) list.jsp 에 페이징 추가**


```jsp
<style type="text/css">
	.page>a.red {
	color: red;
	}
	</style>
<div class="page">		
	<% for (int i = 1; i <= totalPage; i++) {%>		
	<a class="<%=cPage == i ? "red" : "" %>" href="list?page=<%=i%>"><%=i%></a>		
	<%}%>
</div>
```

- <%=cPage == i ? "red" : "" %> 삼항연산자로 6페이지가 리스팅됬다면 해당하는 버튼에 class="page"를 부여

- 6페이지를 보고있다면 6페이지버튼에 color를 red로 적용 현재 페이지를 알려주기 위해

- \<style type="text/css">\</style> 내부스타일 시트로 .page>a.red에 해당하는 요소에 스타일 적용

  