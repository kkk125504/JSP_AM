### sql 에러 메세지 콘솔에 노출, 회원가입시 아이디 중복체크

**1\) sql 에러 메세지 콘솔에 노출**

```java
		catch (SQLException e) {
			System.out.println("===========QUERY 예외 발생===========\n" +sql);
			throw new SQLErrorException("SQL 예외, SQL : " + sql, e);
		}
```

- DBUtil의 메소드에서 SQLException예외 발생시 SQLErrorException를 발생시키고 있다.

```java
		catch (SQLException e) {
			e.printStackTrace();
		} catch (SQLErrorException e) {
			e.getOrigin().printStackTrace();
		} 
```

-  메소드를 ```호출하는 쪽```에서 SQLErrorException예외를 catch하여 콘솔에 메세지를 띄워줌

**2\)  회원가입시 아이디 중복체크 (doJoinServlet)**	

```java
        String loginId = request.getParameter("loginId");
        String loginPw = request.getParameter("loginPw");
        String name = request.getParameter("name");

        SecSql sql = SecSql.from("SELECT COUNT(*) >0 FROM `member`");
        sql.append("WHERE loginId = ?", loginId);
        boolean isJoinAvailableLoginId = DBUtil.selectRowIntValue(conn, sql) == 0;

        if (isJoinAvailableLoginId == false) {
			response.getWriter()
						.append(String.format("<script>alert('이미 사용중인 아이디입니다.'); location.replace('join');</script>"));
				return;
			}
```

- Form으로 전송받은 회원정보를 DB에 Insert하기전에 중복체크
- SELECT COUNT(*) FROM `member` 한 결과를 boolean으로 가져오고
- DBUtil.selectRowIntValue(conn, sql) == 0;는 int타입으로온 데이터를 비교연산자를 통해 boolean값으로 만듬
- 0 이아니라면 아이디가 존재하는것으로 false 반환, false라면 Insert를 못하게 return하고 회원가입페이지로 이동

