### 게시물 리스트 구현, 서블릿이 DB에서 얻어온 데이터를 jsp에게 넘겨주고 jsp에서 반복문으로 출력

- **HTTP 요청의 파라미터 값을 얻기 위해 사용하는 것이 request.getParameter()**

- **다른 곳으로 정보를 넘겨주기 위해서 request 객체의 속성(attribute)을 사용**

```java
request.setAttribute("객체명",객체) 
request.setAttribute(String name, Object value)    
```

- 이런 식으로 값을 세팅해야지만 jsp에서 값을 받을 수 있다.

```java
request.setParameter()와 getParameter()
```

- getParameter() 이용하면 String 값만 받을 수 있다.

```java
setAttribute() , getAttribute()
```

- 그래서 list를 받기 위해서는 setAttribute() , getAttribute()

- type이 object이기 때문에 반드시 형변환 필요

#### 1\) DB에서 가져온 데이터를 JSP에게 전달

```java
		DBUtil dbUtil = new DBUtil(request, response);
		String sql = "SELECT * FROM article";
					
		List<Map<String, Object>> articleRows = dbUtil.selectRows(conn, sql);
		
		request.setAttribute("articleRows",articleRows);
		request.getRequestDispatcher("/jsp/article/list.jsp").forward(request, response);
```

- List<Map<String, Object>>타입의 articleRows를 전달하기위해 request.setAttribute( )를 이용
- request.getRequestDispatcher()를 이용하여 "/jsp/article/list.jsp"로 경로를 지정 
- .forward(request, response);를 통해 페이지 이동

#### 2\) list.jsp 

```jsp
<%@ page import="java.time.LocalDateTime "%>
<%@ page import="java.util.List" %>
<%@ page import="java.util.Map" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
List<Map<String, Object>> articleRows = (List<Map<String, Object>>)request.getAttribute("articleRows");
%>
```

- jsp파일에서 라이브러리를  import 해야할때 
- <%@ page import="java.time.LocalDateTime "%> 방식으로 적용
- sevlet에서 request.setAttribute("articleRows", articleRows)로 공유한 데이터를
- request.getAttribute("articleRows");로 받는다.

### 3) list.jsp에서 게시물리스트 데이터를 출력하는 방법

```jsp
<h1>게시물 리스트 v1</h1>
<ul>
	<li><%=(int)articleRows.get(0).get("id") %>번, <%=(LocalDateTime)articleRows.get(0).get("regDate") %>, <%=(String)articleRows.get(0).get("title") %></li>
	<li><%=(int)articleRows.get(1).get("id") %>번, <%=(LocalDateTime)articleRows.get(1).get("regDate") %>, <%=(String)articleRows.get(1).get("title") %></li>
	<li><%=(int)articleRows.get(2).get("id") %>번, <%=(LocalDateTime)articleRows.get(2).get("regDate") %>, <%=(String)articleRows.get(2).get("title") %></li>
</ul>
```

- articleRows에서 하나씩 꺼내서 ul > li 에 담아서 출력

```jsp
<h1>게시물 리스트 v2</h1>
<%for(int i =0; i<3; i++){%>
<li><%=(int)articleRows.get(i).get("id") %>번, <%=(LocalDateTime)articleRows.get(i).get("regDate") %>, <%=(String)articleRows.get(i).get("title") %></li>
<% } %>
```

- for문을통해 articleRows.get(i)로 데이터를 가져옴


```jsp
<h1>게시물 리스트 v3</h1>
<%for(int i =0; i<3; i++){
	Map<String, Object> articleRow = articleRows.get(i);
%>
<li><%=(int)articleRow.get("id") %>번, <%=(LocalDateTime)articleRow.get("regDate") %>, <%=(String)articleRow.get("title") %></li>
<% } %>
```

- Map<String, Object>타입으로 데이터를 담고 출력

```jsp
<h1>게시물 리스트 v4</h1>
<%for(int i =0; i< articleRows.size(); i++){ 
Map<String, Object> articleRow = articleRows.get(i);
%>
<li><%=(int)articleRow.get("id") %>번, <%=(LocalDateTime)articleRow.get("regDate") %>, <%=(String)articleRow.get("title") %></li>
<% } %>
```

- 위에 방법들은 게시물데이터를 3개만 가져옴
- articleRows.size();를 통해 전체 게시물데이터 출력

```jsp
<h1>게시물 리스트 v5</h1>
<%for(Map<String, Object> articleRow : articleRows ){ %>	
<li><%=(int)articleRow.get("id") %>번, <%=(LocalDateTime)articleRow.get("regDate") %>, <%=(String)articleRow.get("title") %></li>
<% }%>
```

- for each문을 통해 articleRows를 순회하여 데이터를 출력 		